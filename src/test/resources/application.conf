# COSMEX Demo Configuration
# This configuration is used for demo purposes with Alice and Bob trading

# Server Configuration
server {
  host = "localhost"
  port = 8080

  # WebSocket configuration
  websocket {
    # Path will be: ws://${server.host}:${server.port}/ws/{txId}/{txIdx}
    basePath = "/ws"
  }
}

# Cardano Network Configuration
network {
  # Network type: mainnet, preview, preprod, custom
  type = "preprod"

  # For preview/preprod
  magic = 1  # Preprod network magic

  # Slot configuration
  slotLength = 1000  # milliseconds

  # Protocol parameters
  protocolParams {
    minFeeA = 44
    minFeeB = 155381
    maxTxSize = 16384
    maxBlockHeaderSize = 1100
  }
}

# Blockchain Provider Configuration
blockchain {
  # Provider type: mock, yaci-devkit, preprod, preview
  # - mock: In-memory MockLedgerApi (fast, no Docker required)
  # - yaci-devkit: Local blockchain via Docker testcontainer (real blockchain behavior)
  # - preprod: Cardano preprod testnet (requires network access)
  # - preview: Cardano preview testnet (requires network access)
  # provider = "yaci-devkit"
  provider = "preprod"
  
  # Yaci DevKit specific configuration (when provider = "yaci-devkit")
  yaciDevkit {
    # Container startup timeout (seconds)
    startupTimeout = 60
    
    # Enable container reuse for faster test execution
    reuseContainer = true
    
    # Container logs
    enableLogs = false
  }
  
  # Network provider configuration (when provider = "preprod" or "preview")
  networkProvider {
    # API endpoint (e.g., Blockfrost, Koios, Ogmios)
    type = "blockfrost"  # blockfrost, koios, ogmios
    
    # API configuration
    blockfrost {
      url = "https://cardano-preprod.blockfrost.io/api/v0"
      # Project ID should be set via environment variable: BLOCKFROST_PROJECT_ID
    }
  }
}

# Exchange Configuration
exchange {
  # Seed for generating exchange keys (DEMO ONLY - use real keys in production)
  seed = 1

  # Exchange parameters
  params {
    # Minimum deposit amount in lovelace
    minDeposit = 2000000  # 2 ADA

    # Contest period in slots
    snapshotContestPeriod = 100
    tradesContestPeriod = 100
  }
}

# Asset Definitions
assets {
  # ADA (native currency)
  ada {
    policyId = ""
    assetName = ""
    decimals = 6
    symbol = "ADA"
  }

  # Mock USDM stablecoin (for demo purposes)
  usdm {
    # Example policy ID - replace with actual in production
    policyId = "8e51398904a5d3fc129fbf4f1589701de23c7824d5c90fdb9490e15a"
    assetName = "5553444d"  # "USDM" in hex
    decimals = 6
    symbol = "USDM"
  }
}

# Client Configurations

# Alice Configuration
alice {
  # Seed for generating Alice's keys (DEMO ONLY)
  seed = 2

  # Mnemonic phrase for Alice (optional, overrides seed if provided)
  # For yaci-devkit, using mnemonic allows transaction signing
  # Standard BIP39 test mnemonic
  #mnemonic = "test test test test test test test test test test test test test test test test test test test test test test test sauce"
  mnemonic = "liar pact cross wink margin exile wrap roof ignore arrive stable argue essay rent gesture grass marble recall wolf truly boss frame naive engage"

  # Initial channel balances
  initialBalance {
    ada = 1000000000  # 1000 ADA in lovelace
  }

  # Channel opening configuration
  channel {
    # How much ADA to deposit when opening channel (in lovelace)
    depositAmount = 100000000  # 100 ADA
  }

  # Trading configuration
  trading {
    # Default order: SELL 100 ADA @ 0.50 USDM/ADA
    defaultOrder {
      side = "SELL"
      baseAsset = "ada"
      quoteAsset = "usdm"
      amount = 100000000  # 100 ADA in lovelace
      price = 500000      # 0.50 USDM per ADA (in micro-units)
    }
  }
}

# Bob Configuration
bob {
  # Seed for generating Bob's keys (DEMO ONLY)
  seed = 3

  # Mnemonic phrase for Bob (optional, overrides seed if provided)
  # For yaci-devkit, using mnemonic allows transaction signing
  # Same mnemonic as Alice, but different account index via seed creates different addresses
  #mnemonic = "test test test test test test test test test test test test test test test test test test test test test test test sauce"
  mnemonic = "liar pact cross wink margin exile wrap roof ignore arrive stable argue essay rent gesture grass marble recall wolf truly boss frame naive engage"

  # Initial channel balances
  initialBalance {
    ada = 500000000   # 500 ADA in lovelace
    usdm = 1000000000 # 1000 USDM in micro-units
  }

  # Channel opening configuration
  channel {
    # How much ADA to deposit when opening channel (in lovelace)
    depositAmount = 100000000  # 100 ADA
  }

  # Trading configuration
  trading {
    # Default order: BUY 100 ADA @ 0.55 USDM/ADA
    defaultOrder {
      side = "BUY"
      baseAsset = "ada"
      quoteAsset = "usdm"
      amount = 100000000  # 100 ADA in lovelace
      price = 550000      # 0.55 USDM per ADA (in micro-units)
    }
  }

  # Token minting configuration (optional)
  # When enabled, Bob will mint a custom token before opening the channel
  # This is useful for yaci-devkit where multi-asset tokens aren't pre-funded
  minting {
    # Enable token minting (default: false)
    enabled = true

    # Token name to mint
    tokenName = "BOBTOKEN"

    # Amount to mint (in base units)
    amount = 1000000000
  }
}

# Logging Configuration
logging {
  level = "INFO"

  # Enable verbose logging for specific components
  verbose {
    server = true
    clients = true
    orderMatching = true
    blockchain = false
  }
}

# Demo Scenario Configuration
demo {
  # Whether to wait for user input between steps
  interactive = false

  # Delay between actions (milliseconds)
  actionDelay = 1000

  # Auto-close after successful trade
  autoClose = false

  # Display configuration
  display {
    showSnapshots = true
    showBalances = true
    showOrderBook = true
    showTrades = true
  }
}
